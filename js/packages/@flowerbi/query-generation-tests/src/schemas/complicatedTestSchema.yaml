schema: ComplicatedTestSchema
name: Testing
tables:

    Department:
        id:
            Id: [long]
        columns:
            DepartmentName: [string]

    Vendor:
        name: Supplier
        id:
            Id: [long]
        columns:
            VendorName: [string]
            DepartmentId: [Department]

    Invoice:
        id:
            Id: [long]
        columns:
            VendorId: [Vendor]
            DepartmentId: [Department]
            Amount: [decimal, FancyAmount]
            Paid: [bool?]

    Tag:
        id:
            Id: [long]
        columns:
            TagName: [string]

    InvoiceTag:
        associative: [InvoiceId, TagId]
        columns:
            InvoiceId: [Invoice]
            TagId: [Tag]

    Category:
        id:
            Id: [long]
        columns:
            DepartmentId: [Department]
            CategoryName: [string]

    InvoiceCategory:
        associative: [InvoiceId, CategoryId]
        columns:
            InvoiceId: [Invoice]
            CategoryId: [Category]

    AnnotationName:
        conjoint: true
        id:
            Id: [long]
        columns:
            DepartmentId: [Department]
            Name: [string]

    AnnotationValue:
        conjoint: true
        id:
            Id: [long]
        columns:
            DepartmentId: [Department]
            AnnotationNameId: [AnnotationName]
            Value: [string]

    InvoiceAnnotation:
        conjoint: true
        associative: [InvoiceId, AnnotationValueId]
        columns:
            InvoiceId: [Invoice]
            AnnotationValueId: [AnnotationValue]

    VendorRevision:
        id:
            Id: [long]
        columns:
            VendorId: [Vendor]
            DepartmentId: [Department]