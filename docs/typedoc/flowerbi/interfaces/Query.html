<!DOCTYPE html><html class="default"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>Query | flowerbi</title><meta name="description" content="Documentation for flowerbi"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="../assets/style.css"/><link rel="stylesheet" href="../assets/highlight.css"/><script async src="../assets/search.js" id="search-script"></script></head><body><script>document.body.classList.add(localStorage.getItem("tsd-theme") || "os")</script><header><div class="tsd-page-toolbar"><div class="container"><div class="table-wrap"><div class="table-cell" id="tsd-search" data-base=".."><div class="field"><label for="tsd-search-field" class="tsd-widget search no-caption">Search</label><input type="text" id="tsd-search-field"/></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="../index.html" class="title">flowerbi</a></div><div class="table-cell" id="tsd-widgets"><div id="tsd-filter"><a href="#" class="tsd-widget options no-caption" data-toggle="options">Options</a><div class="tsd-filter-group"><div class="tsd-select" id="tsd-filter-visibility"><span class="tsd-select-label">All</span><ul class="tsd-select-list"><li data-value="public">Public</li><li data-value="protected">Public/Protected</li><li data-value="private" class="selected">All</li></ul></div> <input type="checkbox" id="tsd-filter-inherited" checked/><label class="tsd-widget" for="tsd-filter-inherited">Inherited</label><input type="checkbox" id="tsd-filter-externals" checked/><label class="tsd-widget" for="tsd-filter-externals">Externals</label></div></div><a href="#" class="tsd-widget menu no-caption" data-toggle="menu">Menu</a></div></div></div></div><div class="tsd-page-title"><div class="container"><ul class="tsd-breadcrumb"><li><a href="../modules.html">flowerbi</a></li><li><a href="Query.html">Query</a></li></ul><h1>Interface Query&lt;S, C&gt;</h1></div></div></header><div class="container container-main"><div class="row"><div class="col-8 col-content"><section class="tsd-panel tsd-comment"><div class="tsd-comment tsd-typography"><div class="lead">
<p>Strongly-typed query definition: use <a href="../modules.html#jsonifyQuery">jsonifyQuery</a> to convert to the JSON format
and <a href="../modules.html#expandQueryResult">expandQueryResult</a> to generate corresponding output records.</p>
</div></div></section><section class="tsd-panel tsd-type-parameters"><h3>Type parameters</h3><ul class="tsd-type-parameters"><li><h4>S<span class="tsd-signature-symbol">: </span><a href="../modules.html#QuerySelect" class="tsd-signature-type" data-tsd-kind="Type alias">QuerySelect</a></h4></li><li><h4>C<span class="tsd-signature-symbol">: </span><a href="../modules.html#QueryCalculations" class="tsd-signature-type" data-tsd-kind="Type alias">QueryCalculations</a><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type" data-tsd-kind="Type parameter">S</span><span class="tsd-signature-symbol">&gt;</span></h4></li></ul></section><section class="tsd-panel tsd-hierarchy"><h3>Hierarchy</h3><ul class="tsd-hierarchy"><li><span class="target">Query</span></li></ul></section><section class="tsd-panel-group tsd-index-group"><h2>Index</h2><section class="tsd-panel tsd-index-panel"><div class="tsd-index-content"><section class="tsd-index-section "><h3>Properties</h3><ul class="tsd-index-list"><li class="tsd-kind-property tsd-parent-kind-interface"><a href="Query.html#allowDuplicates" class="tsd-kind-icon">allow<wbr/>Duplicates</a></li><li class="tsd-kind-property tsd-parent-kind-interface"><a href="Query.html#calculations" class="tsd-kind-icon">calculations</a></li><li class="tsd-kind-property tsd-parent-kind-interface"><a href="Query.html#comment" class="tsd-kind-icon">comment</a></li><li class="tsd-kind-property tsd-parent-kind-interface"><a href="Query.html#filters" class="tsd-kind-icon">filters</a></li><li class="tsd-kind-property tsd-parent-kind-interface"><a href="Query.html#orderBy" class="tsd-kind-icon">order<wbr/>By</a></li><li class="tsd-kind-property tsd-parent-kind-interface"><a href="Query.html#select" class="tsd-kind-icon">select</a></li><li class="tsd-kind-property tsd-parent-kind-interface"><a href="Query.html#skip" class="tsd-kind-icon">skip</a></li><li class="tsd-kind-property tsd-parent-kind-interface"><a href="Query.html#take" class="tsd-kind-icon">take</a></li><li class="tsd-kind-property tsd-parent-kind-interface"><a href="Query.html#totals" class="tsd-kind-icon">totals</a></li></ul></section></div></section></section><section class="tsd-panel-group tsd-member-group "><h2>Properties</h2><section class="tsd-panel tsd-member tsd-kind-property tsd-parent-kind-interface"><a id="allowDuplicates" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><span class="tsd-flag ts-flagOptional">Optional</span> allow<wbr/>Duplicates<a href="#allowDuplicates" aria-label="Permalink" class="tsd-anchor-icon"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5"></path><path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5"></path></svg></a></h3><div class="tsd-signature tsd-kind-icon">allow<wbr/>Duplicates<span class="tsd-signature-symbol">?:</span> <span class="tsd-signature-type">boolean</span></div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/danielearwicker/flowerbi/blob/d193b44/client/packages/flowerbi/src/queryModel.ts#L200">queryModel.ts:200</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>Only applicable if the query specifies only ordinary columns, no
aggregations. If true, no GROUP BY clause is added to the SQL, so if
multiple results have the same values they will appear repeatedly in
the output. This can greatly reduce the work required by the SQL
engine, and so should be specified if duplicate rows are tolerable or
are known to be impossible.</p>
</div></div></section><section class="tsd-panel tsd-member tsd-kind-property tsd-parent-kind-interface"><a id="calculations" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><span class="tsd-flag ts-flagOptional">Optional</span> calculations<a href="#calculations" aria-label="Permalink" class="tsd-anchor-icon"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5"></path><path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5"></path></svg></a></h3><div class="tsd-signature tsd-kind-icon">calculations<span class="tsd-signature-symbol">?:</span> <span class="tsd-signature-type" data-tsd-kind="Type parameter">C</span></div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/danielearwicker/flowerbi/blob/d193b44/client/packages/flowerbi/src/queryModel.ts#L153">queryModel.ts:153</a></li></ul></aside></section><section class="tsd-panel tsd-member tsd-kind-property tsd-parent-kind-interface"><a id="comment" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><span class="tsd-flag ts-flagOptional">Optional</span> comment<a href="#comment" aria-label="Permalink" class="tsd-anchor-icon"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5"></path><path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5"></path></svg></a></h3><div class="tsd-signature tsd-kind-icon">comment<span class="tsd-signature-symbol">?:</span> <span class="tsd-signature-type">string</span></div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/danielearwicker/flowerbi/blob/d193b44/client/packages/flowerbi/src/queryModel.ts#L191">queryModel.ts:191</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>A string to insert in a comment at the start of the generated SQL.</p>
</div><div><p>This will be aggressively processed to remove the danger of injection
attacks, so anything other than alpha, numeric, new line or CR
characters will be replaced with space.</p>
</div></div></section><section class="tsd-panel tsd-member tsd-kind-property tsd-parent-kind-interface"><a id="filters" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><span class="tsd-flag ts-flagOptional">Optional</span> filters<a href="#filters" aria-label="Permalink" class="tsd-anchor-icon"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5"></path><path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5"></path></svg></a></h3><div class="tsd-signature tsd-kind-icon">filters<span class="tsd-signature-symbol">?:</span> <a href="FilterJson.html" class="tsd-signature-type" data-tsd-kind="Interface">FilterJson</a><span class="tsd-signature-symbol">[]</span></div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/danielearwicker/flowerbi/blob/d193b44/client/packages/flowerbi/src/queryModel.ts#L152">queryModel.ts:152</a></li></ul></aside></section><section class="tsd-panel tsd-member tsd-kind-property tsd-parent-kind-interface"><a id="orderBy" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><span class="tsd-flag ts-flagOptional">Optional</span> order<wbr/>By<a href="#orderBy" aria-label="Permalink" class="tsd-anchor-icon"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5"></path><path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5"></path></svg></a></h3><div class="tsd-signature tsd-kind-icon">order<wbr/>By<span class="tsd-signature-symbol">?:</span> <span class="tsd-signature-symbol">(</span><a href="../modules.html#OrderingJson" class="tsd-signature-type" data-tsd-kind="Type alias">OrderingJson</a><span class="tsd-signature-symbol"> | </span><a href="../modules.html#Ordering" class="tsd-signature-type" data-tsd-kind="Type alias">Ordering</a><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type" data-tsd-kind="Type parameter">S</span><span class="tsd-signature-symbol">, </span><span class="tsd-signature-type" data-tsd-kind="Type parameter">C</span><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">[]</span></div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/danielearwicker/flowerbi/blob/d193b44/client/packages/flowerbi/src/queryModel.ts#L157">queryModel.ts:157</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>Ordering criteria to apply.</p>
</div></div></section><section class="tsd-panel tsd-member tsd-kind-property tsd-parent-kind-interface"><a id="select" class="tsd-anchor"></a><h3 class="tsd-anchor-link">select<a href="#select" aria-label="Permalink" class="tsd-anchor-icon"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5"></path><path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5"></path></svg></a></h3><div class="tsd-signature tsd-kind-icon">select<span class="tsd-signature-symbol">:</span> <span class="tsd-signature-type" data-tsd-kind="Type parameter">S</span></div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/danielearwicker/flowerbi/blob/d193b44/client/packages/flowerbi/src/queryModel.ts#L151">queryModel.ts:151</a></li></ul></aside></section><section class="tsd-panel tsd-member tsd-kind-property tsd-parent-kind-interface"><a id="skip" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><span class="tsd-flag ts-flagOptional">Optional</span> skip<a href="#skip" aria-label="Permalink" class="tsd-anchor-icon"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5"></path><path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5"></path></svg></a></h3><div class="tsd-signature tsd-kind-icon">skip<span class="tsd-signature-symbol">?:</span> <span class="tsd-signature-type">number</span></div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/danielearwicker/flowerbi/blob/d193b44/client/packages/flowerbi/src/queryModel.ts#L179">queryModel.ts:179</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>Number of result records to skip before the first record returned.</p>
</div></div></section><section class="tsd-panel tsd-member tsd-kind-property tsd-parent-kind-interface"><a id="take" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><span class="tsd-flag ts-flagOptional">Optional</span> take<a href="#take" aria-label="Permalink" class="tsd-anchor-icon"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5"></path><path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5"></path></svg></a></h3><div class="tsd-signature tsd-kind-icon">take<span class="tsd-signature-symbol">?:</span> <span class="tsd-signature-type">number</span></div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/danielearwicker/flowerbi/blob/d193b44/client/packages/flowerbi/src/queryModel.ts#L183">queryModel.ts:183</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>Number of result records to return.</p>
</div></div></section><section class="tsd-panel tsd-member tsd-kind-property tsd-parent-kind-interface"><a id="totals" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><span class="tsd-flag ts-flagOptional">Optional</span> totals<a href="#totals" aria-label="Permalink" class="tsd-anchor-icon"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5"></path><path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5"></path></svg></a></h3><div class="tsd-signature tsd-kind-icon">totals<span class="tsd-signature-symbol">?:</span> <span class="tsd-signature-type">boolean</span></div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/danielearwicker/flowerbi/blob/d193b44/client/packages/flowerbi/src/queryModel.ts#L175">queryModel.ts:175</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>Specifies whether to return a <code>totals</code> property containing the
aggregation values across the whole dataset, e.g. if the <code>select</code>
object is:</p>
</div><div><pre><code class="language-ts"><span class="hl-1">{</span><br/><span class="hl-1">   </span><span class="hl-9">customer</span><span class="hl-1">: </span><span class="hl-2">Customer</span><span class="hl-1">.</span><span class="hl-2">Name</span><span class="hl-1">,</span><br/><span class="hl-1">   </span><span class="hl-9">spend</span><span class="hl-1">: </span><span class="hl-2">Invoice</span><span class="hl-1">.</span><span class="hl-2">Amount</span><span class="hl-1">.</span><span class="hl-0">sum</span><span class="hl-1">()</span><br/><span class="hl-1">}</span>
</code></pre>
<p>the returned <code>records</code> will have properties <code>customer</code> and <code>spend</code>,
one per customer. Specify <code>totals: true</code> to also get a <code>totals</code> object
with only a <code>spend</code> property, containing the total spend across all
customers.</p>
</div></div></section></section></div><div class="col-4 col-menu menu-sticky-wrap menu-highlight"><nav class="tsd-navigation primary"><ul><li class=""><a href="../modules.html">Exports</a></li></ul></nav><nav class="tsd-navigation secondary menu-sticky"><ul><li class="current tsd-kind-interface tsd-has-type-parameter"><a href="Query.html" class="tsd-kind-icon">Query</a><ul><li class="tsd-kind-property tsd-parent-kind-interface"><a href="Query.html#allowDuplicates" class="tsd-kind-icon">allow<wbr/>Duplicates</a></li><li class="tsd-kind-property tsd-parent-kind-interface"><a href="Query.html#calculations" class="tsd-kind-icon">calculations</a></li><li class="tsd-kind-property tsd-parent-kind-interface"><a href="Query.html#comment" class="tsd-kind-icon">comment</a></li><li class="tsd-kind-property tsd-parent-kind-interface"><a href="Query.html#filters" class="tsd-kind-icon">filters</a></li><li class="tsd-kind-property tsd-parent-kind-interface"><a href="Query.html#orderBy" class="tsd-kind-icon">order<wbr/>By</a></li><li class="tsd-kind-property tsd-parent-kind-interface"><a href="Query.html#select" class="tsd-kind-icon">select</a></li><li class="tsd-kind-property tsd-parent-kind-interface"><a href="Query.html#skip" class="tsd-kind-icon">skip</a></li><li class="tsd-kind-property tsd-parent-kind-interface"><a href="Query.html#take" class="tsd-kind-icon">take</a></li><li class="tsd-kind-property tsd-parent-kind-interface"><a href="Query.html#totals" class="tsd-kind-icon">totals</a></li></ul></li></ul></nav></div></div></div><footer class="with-border-bottom"><div class="container"><h2>Legend</h2><div class="tsd-legend-group"><ul class="tsd-legend"><li class="tsd-kind-constructor tsd-parent-kind-class"><span class="tsd-kind-icon">Constructor</span></li><li class="tsd-kind-property tsd-parent-kind-class"><span class="tsd-kind-icon">Property</span></li><li class="tsd-kind-method tsd-parent-kind-class"><span class="tsd-kind-icon">Method</span></li></ul><ul class="tsd-legend"><li class="tsd-kind-property tsd-parent-kind-class tsd-is-inherited"><span class="tsd-kind-icon">Inherited property</span></li><li class="tsd-kind-method tsd-parent-kind-class tsd-is-inherited"><span class="tsd-kind-icon">Inherited method</span></li></ul><ul class="tsd-legend"><li class="tsd-kind-property tsd-parent-kind-interface"><span class="tsd-kind-icon">Property</span></li></ul><ul class="tsd-legend"><li class="tsd-kind-method tsd-parent-kind-class tsd-is-protected"><span class="tsd-kind-icon">Protected method</span></li></ul></div><h2>Settings</h2><p>Theme <select id="theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></p></div></footer><div class="container tsd-generator"><p>Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></div><div class="overlay"></div><script src="../assets/main.js"></script></body></html>